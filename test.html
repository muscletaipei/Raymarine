<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Test Page - LED 控制與測試</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- 引入 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css" />
</head>
<body class="hold-transition sidebar-mini layout-fixed">
  <div class="container mt-4">
    <h1>Web Bluetooth 測試頁面</h1>
    <p>後端確認的 BT MAC: <strong>{{ bt_mac }}</strong></p>
    <button id="connect-btn" class="btn btn-primary">使用 Web Bluetooth 連線 Nordic nRF52840-DK</button>
  </div>
  <script>
    document.getElementById("connect-btn").addEventListener("click", async function () {
      try {
        // 使用 Web Bluetooth API 掃描符合條件的設備（此例以 Nordic nRF52840-DK 為例）
        const device = await navigator.bluetooth.requestDevice({
          filters: [{ namePrefix: "nRF52840-DK" }],
          optionalServices: ['8d53dc1d-1db7-4cd3-868b-8a527460aa84']
        });
        console.log("連線設備:", device);
        alert("已連線至: " + device.name);
        // 此處可加入後續的測試邏輯
      } catch (error) {
        console.error("連線失敗:", error);
        alert("連線失敗: " + error);
      }
    });
  </script>
  <script src="https://ddei5-0-ctp.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fcode.jquery.com%2fjquery%2d3.5.1.min.js&umid=D6273770-2F07-6206-877C-5FB71DAA9220&auth=16b2c1eae615e662aa232d8bf19321a46f4b3211-ee48a24448c5034934785ac3feeb43193e4558d8"></script>
  <script src="https://ddei5-0-ctp.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fcdn.jsdelivr.net%2fnpm%2fbootstrap%404.6.2%2fdist%2fjs%2fbootstrap.bundle.min.js&umid=D6273770-2F07-6206-877C-5FB71DAA9220&auth=16b2c1eae615e662aa232d8bf19321a46f4b3211-b6dbc82d2e6b7811e21f11eb60932118f93fb29b"></script>
</body>
</html>
